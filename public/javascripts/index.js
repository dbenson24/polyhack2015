// Generated by CoffeeScript 1.7.1

/*
yourLocation = new google.maps.LatLng(42.4019, -71.1193)
myOptions =
    zoom: 13,
    center: yourLocation,
    mapTypeId: google.maps.MapTypeId.ROADMAP
map = new google.maps.Map(document.getElementById("map"), myOptions)
 */


/*
var myLat;
var myLng;
if(navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
						myLat = position.coords.latitude;
						myLng = position.coords.longitude;
    }
} else {
 */

(function() {
  var fillEvents, myLat, myLng;

  myLat = 48.8582;

  myLng = 2.2945;

  window.writeText = function(text, selector, rate) {
    var i, write, x, _results;
    i = 0;
    write = function() {
      var header;
      header = $(selector);
      header.html(header.html() + text[i]);
      return i++;
    };
    x = 0;
    _results = [];
    while (x < text.length) {
      setTimeout(write, x * rate);
      _results.push(x++);
    }
    return _results;
  };

  fillEvents = function(locations) {
    var content, events, id, loc, _i, _len, _results;
    console.log("locations", locations);
    events = $("#events");
    _results = [];
    for (id = _i = 0, _len = locations.length; _i < _len; id = ++_i) {
      loc = locations[id];
      content = "<li id=\"msg_" + id + "\" class=\"event\">\n</li>";
      events.html(events.html() + content);
      _results.push(writeText(loc.sentence, "#msg_" + id, 150));
    }
    return _results;
  };

  $.getJSON("/api/locations/" + myLat + "/" + myLng, function(result) {
    var data;
    data = result.result.locations;
    plotRoute(data);
    return fillEvents(data.slice(0, 9));
  });

  writeText("Skeleton Activity", ".header h1", 250);

}).call(this);
